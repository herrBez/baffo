input {
  beats {
    port => 9200
    id => "beats-1"
  }
}
filter {
  if [@metadata][ip_address] == "127.0.0.1" or [host] == "zizzo" {
    # This should be a warning given that host have been renamed
    grok {
      id => "grok-2"
    }
  } else if [@metadata][foo] == "X.X.X.X" {
    grok {
        match => {
          "message" => "foo"
        } 
    }
  }
}

output {
    if [host] == "127.0.0.1" {
        elasticsearch {
            host => "127.0.0.1:9200"
            id => "elasticsearch-4"
        }
    } else {
        kafka {
            
        }
    }
}
